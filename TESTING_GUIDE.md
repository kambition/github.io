# 测试指南 - 血管点击与交互 (Testing Guide)

## 🎯 测试目标

验证以下两个问题是否已解决：
1. ✅ 静脉和毛细血管可以正常点击
2. ✅ 心脏与血管的交互更加明显

---

## 📋 测试步骤

### 测试1: 血管点击功能

#### 1.1 测试动脉点击 🔴
**步骤**:
1. 刷新浏览器页面
2. 找到红色的血管（主动脉、颈动脉等）
3. 将鼠标悬停在红色血管上
   - **预期**: 出现提示框 "🔴 动脉 (Artery)"
4. 点击红色血管
   - **预期**: 
     - 信息面板显示"动脉"详细介绍
     - 动脉系统高亮（红色增强）
     - 静脉和毛细血管变暗
     - 控制台输出: `Clicked object type: artery`

#### 1.2 测试静脉点击 🔵
**步骤**:
1. 找到蓝色的血管（上腔静脉、下腔静脉等）
2. 将鼠标悬停在蓝色血管上
   - **预期**: 出现提示框 "🔵 静脉 (Vein)"
3. 点击蓝色血管
   - **预期**: 
     - 信息面板显示"静脉"详细介绍
     - 静脉系统高亮（蓝色增强）
     - 动脉和毛细血管变暗
     - 控制台输出: `Clicked object type: vein`

**主要静脉位置**:
- 上腔静脉：心脏上方，蓝色粗管
- 下腔静脉：心脏下方，蓝色粗管
- 肺静脉：从肺部到心脏，4条细管

#### 1.3 测试毛细血管点击 💜
**步骤**:
1. 找到紫色的细小血管（围绕器官的网状结构）
2. 将鼠标悬停在紫色血管上
   - **预期**: 出现提示框 "💜 毛细血管 (Capillary)"
3. 点击紫色血管
   - **预期**: 
     - 信息面板显示"毛细血管"详细介绍
     - 毛细血管系统高亮（紫色增强）
     - 动脉和静脉变暗
     - 控制台输出: `Clicked object type: capillary`

**毛细血管位置**:
- 肺部周围：细密的紫色网状
- 心脏周围：放射状紫色细管
- 肝脏周围：密集紫色网络
- 头部周围：环绕状紫色细管

---

### 测试2: 心脏与血管交互

#### 2.1 查看连接点脉动
**步骤**:
1. 找到心脏位置
2. 观察心脏周围的彩色发光球体
   - **应该看到6个脉动的球体**:
     - 🔴 主动脉出口（心脏左下，红色）
     - 🔴 肺动脉出口（心脏右上，红色）
     - 🔵 上腔静脉入口（心脏右上，蓝色）
     - 🔵 下腔静脉入口（心脏右下，蓝色）
     - 🩸 左肺静脉入口（心脏左侧，粉红）
     - 🩸 右肺静脉入口（心脏右侧，粉红）

**预期效果**:
- ✅ 球体随心跳节律脉动（放大/缩小）
- ✅ 透明度变化（0.6 - 1.0）
- ✅ 颜色与对应血管一致

#### 2.2 追踪血液流动
**步骤**:
1. 观察红色血液粒子（动脉血）
   - 从心脏 → 主动脉 → 各器官
2. 观察蓝色血液粒子（静脉血）
   - 从各器官 → 静脉 → 回到心脏
3. 观察肺循环中的颜色变化
   - 蓝色（缺氧）→ 紫色（过渡）→ 红色（富氧）

**预期效果**:
- ✅ 粒子沿血管路径流动
- ✅ 流动是连续的循环
- ✅ 肺循环粒子颜色渐变

#### 2.3 查看完整血管网络
**步骤**:
1. 旋转3D视图（鼠标拖拽）
2. 从不同角度观察血管系统
   - 前方：主动脉、上下腔静脉
   - 侧面：肺动脉、肺静脉
   - 顶部：颈动脉、颈静脉
   - 底部：股动脉、股静脉

**新增血管应该可见**:
- ✅ 颈动脉/静脉（头部）
- ✅ 锁骨下动脉/静脉（上肢）
- ✅ 肠系膜动脉（腹部）
- ✅ 门静脉（肝脏）
- ✅ 股动脉/静脉（腿部）

---

## 🐛 故障排除

### 问题1: 静脉/毛细血管仍然无法点击
**检查**:
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签
3. 点击血管时，应该看到: `Clicked object type: vein` 或 `capillary`

**如果没有输出**:
- 可能点击到了其他物体（骨骼、器官）
- 尝试从不同角度点击
- 确保点击蓝色/紫色血管本身

**如果输出是 `undefined`**:
- 血管的 userData.type 可能没有正确设置
- 需要检查代码

### 问题2: 连接点不可见
**检查**:
1. 确保心脏已加载
2. 缩放视图到合适距离
3. 连接点是小球体，需要仔细查看

**位置参考**:
- 主动脉出口: (-0.2, 3.5, 0.5)
- 肺动脉出口: (0.5, 3.5, 0.3)
- 上腔静脉: (0.6, 4, 0.3)
- 下腔静脉: (0.7, 1.5, 0.5)

### 问题3: 血管颜色不鲜艳
**原因**: 
- 可能是浏览器缓存
- 需要强制刷新

**解决**:
- Windows: Ctrl + F5
- Mac: Cmd + Shift + R

---

## ✅ 成功标准

### 点击功能合格标准
- ✅ 能够点击并识别所有类型的血管（动脉、静脉、毛细血管）
- ✅ 每种血管点击后显示对应的知识介绍
- ✅ 悬停提示正确显示血管类型

### 交互功能合格标准
- ✅ 6个心脏连接点可见并脉动
- ✅ 血管颜色鲜明（红、蓝、紫）
- ✅ 至少能看到14条动脉 + 13条静脉
- ✅ 血液粒子沿血管流动

---

## 📊 测试记录表

| 测试项 | 状态 | 备注 |
|-------|------|------|
| 动脉点击 | ⬜ | |
| 静脉点击 | ⬜ | |
| 毛细血管点击 | ⬜ | |
| 连接点可见 | ⬜ | |
| 连接点脉动 | ⬜ | |
| 血管颜色 | ⬜ | |
| 血液流动 | ⬜ | |
| 悬停提示 | ⬜ | |
| 知识面板 | ⬜ | |
| 高亮效果 | ⬜ | |

**测试完成时间**: _______________

**测试人**: _______________

**总体评价**: ⬜ 通过  ⬜ 不通过

---

## 🎓 教学验证

### 学生应该能够理解
1. ✅ 三种血管的区别（颜色、位置、功能）
2. ✅ 心脏如何连接血管
3. ✅ 血液如何循环流动
4. ✅ 体循环和肺循环的路径

### 教学效果检查
- 学生能否通过颜色识别血管类型？
- 学生能否追踪血液流动路径？
- 学生能否理解心脏与血管的连接？
- 学生能否区分动脉血和静脉血？

---

**备注**: 如有任何问题，请检查浏览器控制台的错误信息
